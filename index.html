<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hello Website</title>

  <link rel="stylesheet" href="style.css" />

  <!-- Firebase SDK (Compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>

<body>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCqdmiq_qvhYb8luQbS3yWZ5yaUGEDXhwY",
    authDomain: "hello-website-d5502.firebaseapp.com",
    projectId: "hello-website-d5502",
    storageBucket: "hello-website-d5502.appspot.com",
    messagingSenderId: "887800679372",
    appId: "1:887800679372:web:78c74ebdabb1e076966b69"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  window.userName = "Anonymous";

  window.onload = () => {
    const devDiv = document.createElement("div");
    devDiv.id = "devName";
    devDiv.innerText = "Developer â€“ Rachit";
    document.body.appendChild(devDiv);
    showNamePopup();
  };

  function showNamePopup() {
    const popup = document.createElement("div");
    popup.id = "namePopup";
    popup.innerHTML = `
      <h2>Enter Your Name</h2>
      <input type="text" id="popupNameInput" placeholder="Your Name" />
      <button onclick="submitName()">Submit</button>
    `;
    document.body.appendChild(popup);
  }

  function submitName() {
    const input = document.getElementById("popupNameInput").value.trim();
    window.userName = input !== "" ? input : "Anonymous";

    document.getElementById("namePopup").remove();

    db.collection("visitors").add({
      name: window.userName,
      time: firebase.firestore.FieldValue.serverTimestamp()
    });
  }
</script>

</body>
</html>
